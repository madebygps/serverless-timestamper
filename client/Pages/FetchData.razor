@page "/fetchdata"
@inject HttpClient Http
@inject NavigationManager NavigationManager
@inherits FetchDataBase

<PageTitle>Timestamp Generator</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Timestamp Generator.</MudText>
<MudText Class="mb-8">Provide your YouTube video URL</MudText>

<MudTextField @bind-Value="VideoURL" Label="Video URL" Variant="Variant.Text"></MudTextField>

<MudButton Tex OnClick="GetTimestamps" Variant="Variant.Filled" Color="Color.Primary">
    <MudText>Click me</MudText>
</MudButton>

<MudText Align="Align.Center">SignalR status: <MudText Align="Align.Center"
        Color="@(hubConnection.State.ToString() is "Connected" ? MudBlazor.Color.Success : MudBlazor.Color.Error)">
        @hubConnection.State</MudText>
</MudText>


<ul id="messagesList">
    @foreach (var message in timestamps)
    {
        <li>@message</li>
    }
</ul>

@code {
    public string VideoURL { get; set; }

    // a function that will call api and return json
    public async void GetTimestamps()
    {
        await
        Http.GetAsync($"https://timestamper.azurewebsites.net/api/DurableFunctionsOrchestrationCSharp1_HttpStart?videoUrl={VideoURL}");
        // call orchestrator
        //StateHasChanged();
    }
}